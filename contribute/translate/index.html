<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
        <title>Carbon - A simple PHP API extension for DateTime.</title>
        <meta name="description" content="Carbon - A simple PHP API extension for DateTime.">
        <link href='//fonts.googleapis.com/css?family=Open+Sans:400,300,600' rel='stylesheet' type='text/css'>
        <link href="//cdn.jsdelivr.net/npm/bootstrap@3.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
        <link href="//cdn.jsdelivr.net/npm/highlight.js@8.4.0/styles/tomorrow-night.min.css" rel="stylesheet">
        <link href="/carbon.css?v=2019-08-01-21-40" rel="stylesheet">
        <script>
            (function (i, s, o, g, r, a, m) {
                i['GoogleAnalyticsObject'] = r;
                i[r] = i[r] || function () {
                    (i[r].q = i[r].q || []).push(arguments)
                }, i[r].l = 1 * new Date();
                a = s.createElement(o),
                    m = s.getElementsByTagName(o)[0];
                a.async = 1;
                a.src = g;
                m.parentNode.insertBefore(a, m)
            })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

            ga('create', 'UA-27020320-3', 'auto');
            ga('send', 'pageview');

        </script>
    </head>
    <body data-spy="scroll" data-target="#affix-nav">

    <div class="main-wrapper">
        <aside id="reference">
            <div class="search-wrapper">
                <div class="search-bar">
                    <div class="input-group">
                        <span class="input-group-addon">
                            <i class="glyphicon glyphicon-search"></i>
                        </span>
                        <input type="text" class="form-control" placeholder="Search" id="search-filter">
                    </div>
                    <button class="close">&lt;</button>
                </div>
                <div class="search"></div>
            </div>
        </aside>
        <section>
            <nav class="navbar navbar-default navbar-static-top">
                <div class="container">
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar"
                                aria-expanded="false" aria-controls="navbar">
                            <span class="sr-only">Toggle navigation</span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>
                        <a class="navbar-brand" href="/"><img src="/logo.png" alt="Carbon" width="159" height="50"></a>
                    </div>
                    <div id="navbar" class="navbar-collapse collapse">
                        <ul class="nav navbar-nav">
                            <li><a href="/#gettingstarted">Getting Started</a></li>
                            <li><a href="/docs/">Docs</a></li>
                            <li><a href="#reference">Reference</a></li>
                            <li><a href="/history/">History</a></li>
                            <li><a href="/contribute/">Contribute</a></li>
                            <li><a href="//github.com/briannesbitt/carbon">GitHub</a></li>
                        </ul>
                    </div>
                </div>
            </nav>



            <div class="container page">
                <div class="row">
                    <div class="col-md-12">
                        <div class="edit-slot"></div>

<div class="translate-slot"></div>



                    </div>

                </div>
            </div>
        </section>
    </div>

    <footer>
        <div class="help-translate">
            <a href="#" class="close" data-session-close="footer .help-translate">✖</a>
            Do you speak <strong>#{language}</strong>? You can help Carbon to
            <a href="/contribute/translate/">improve its translations</a>!<br>
            No coding skills needed, <a href="/contribute/translate/">go to translation tool</a>.
        </div>
        <div class="available-slot container">
            <a href="#" class="close" data-session-close="footer .available-slot">✖</a>
            <div data-ea-publisher="carbon" data-ea-type="text"></div>
        </div>
    </footer>

    <script async src="https://media.ethicalads.io/media/client/ethicalads.min.js"></script>
    <script src="//cdn.jsdelivr.net/npm/jquery@1.11.2/dist/jquery.min.js"></script>
    <script src="//cdn.jsdelivr.net/npm/bootstrap@3.3.2/dist/js/bootstrap.min.js"></script>
    <script>

        var liveEditorHosts = [
            'https://play.phpsandbox.io/embed/nesbot/carbon'
        ];
        var sessStorage = window.sessionStorage || {};
        var storage = window.localStorage || {};
        var balancingId = storage.balancingId || (storage.balancingId = Math.floor(Math.random() * 1024));
        var liveEditorHostIndex = balancingId % liveEditorHosts.length;
        var liveEditorHost = liveEditorHosts[liveEditorHostIndex];
        var callbacks = {};
        var $document = $(document);
        var editorAutoLoad = false;
        var failures = 0;

        function failOver(index) {
            if (index !== liveEditorHostIndex || ++failures >= liveEditorHosts.length) {
                return;
            }

            liveEditorHostIndex++;
            liveEditorHost = liveEditorHosts[liveEditorHostIndex % liveEditorHosts.length];

            var timeout = setTimeout(function () {
                failOver(hostIndex);
            }, 10000);

            $('[data-href-params]').each(function () {
                var $link = $(this);
                $link.prop('href', liveEditorHost + $link.data('href-params'));
            });

            $('[data-src-params]').each(function () {
                var $iframe = $(this);
                $iframe.prop('src', liveEditorHost + $iframe.data('src-params')).data('timeout', timeout);
            });
        }

        function transformEditor($pre, index, code, token, link, params) {
            if (!$pre.hasClass('live-editor') || $pre.hasClass('live-editor-loading')) {
                return;
            }

            $pre.removeClass('live-editor').addClass('live-editor-loading');

            if (!code) {
                code = $pre.find('code').text();
                token = 'live-editor-' + index;
                params = '?input='
                    + encodeURIComponent(code)
                    ; // + '&hide-output-gutter&output-left-padding=10&theme=tomorrow_night&border=none&radius=4&v-padding=15&token=' + token;
                link = liveEditorHost + params;

                if (!$('.link-' + token).length) {
                    $('<a class="live-editor-new-window link-' + token + '" href="' + link + '" data-href-params="' + params + '" target="_blank"><i class="glyphicon glyphicon-new-window"></i></a>').insertBefore($pre);
                }
            }

            var timeout = setTimeout(function () {
                failOver(hostIndex);
            }, 10000);
            var hostIndex = liveEditorHostIndex;
            var $iframe = $('<iframe src="' + link +
                '&embed" data-src-params="' + params +
                '&embed" data-timeout="' + timeout +
                '" onerror="failOver(' + hostIndex + ')" style="width: 100%; border: none; opacity: 0; pointer-events: none; position: absolute;"></iframe>').insertAfter($pre);

            $iframe.css({
                opacity: 1,
                pointerEvents: 'all',
                position: '',
                height: $pre.outerHeight() + 'px'
            });
            $pre.hide();
            // (callbacks[token] || (callbacks[token] = {})).ready = function () {
            //     clearTimeout($iframe.data('timeout'));
            //
            //     $iframe.css({
            //         opacity: 1,
            //         pointerEvents: 'all',
            //         position: '',
            //         height: $pre.outerHeight() + 'px'
            //     });
            //     $pre.hide();
            // };
        }

        var scrollCheckDebounce = null;

        function scrollCheck() {
            if (scrollCheckDebounce) {
                clearTimeout(scrollCheckDebounce);
            }

            scrollCheckDebounce = setTimeout(function () {
                $('.live-editor').each(function (index) {
                    var $pre = $(this);
                    if (!editorAutoLoad) {
                        var code = $pre.find('code').text();
                        var token = 'live-editor-' + index;
                        var params = '?hide-output-gutter&output-left-padding=10&theme=tomorrow_night&border=none&radius=4&v-padding=15&input=' +
                            encodeURIComponent(code) +
                            '&token=' + token;
                        var link = liveEditorHost + params;
                        $pre.css('cursor', 'pointer').click(function () {
                            transformEditor($pre, index, code, token, link, params);
                        });

                        if (!$('.link-' + token).length) {
                            $('<a class="live-editor-new-window link-' + token + '" href="' + link + '" target="_blank"><i class="glyphicon glyphicon-new-window"></i></a>').insertBefore($pre);
                        }

                        return;
                    }

                    var scrollTop = $document.scrollTop();
                    var scrollBottom = scrollTop + $(window).height();
                    var viewMargin = 400;
                    var top = $pre.offset().top;
                    if (top + $pre.outerHeight() + viewMargin > scrollTop && top - viewMargin < scrollBottom) {
                        transformEditor($pre, index);
                    }
                });
            }, 1000);
        }

        function openDocPanel(className, selection) {
            $('#search-filter').val('');
            refreshDoc();
            $('.main-wrapper').addClass('open');
            $('#doc-method-' + className + '-' + selection)[0].scrollIntoView();
        }

        function openDoc(event, selection, token) {
            selection = $.trim(selection);
            if (/^[a-zA-Z0-9_-]+$/.test(selection)) {
                var options = [];

                $.each(['Carbon', 'CarbonInterval', 'CarbonPeriod'], function (index, className) {
                    var element = $('#doc-method-' + className + '-' + selection)[0];
                    if (element) {
                        options.push([className, selection, element]);
                    }
                });

                $('#open-doc-menu').remove();
                var $menu = $('.modal-menu');

                if ($menu.length === 0) {
                    $menu = $('<div class="modal-menu">').appendTo('body');
                }

                $(document).one('click', function () {
                    $menu.remove();
                });

                var pageX = event.pageX | 0;
                var pageY = event.pageY | 0;

                if (typeof event.pageX === 'undefined') {
                    var $currentEditor = $('iframe[src*="' + token + '"]');
                    pageX = $currentEditor.offset().left;
                    pageY = $currentEditor.offset().top;
                }

                var modalHeight = options.length * 26 + 10;
                var scrollTop = $document.scrollTop();

                $menu.css({
                    left: pageX + 'px',
                    top: Math.max(scrollTop, pageY - modalHeight) + 'px'
                }).html(options.map(function (option) {
                    return '<div class="modal-menu-item" onclick="openDocPanel(\'' + option[0] + '\', \'' + option[1] + '\')">' + option[0] + '::<strong>' + option[1] + '</strong></div>';
                }).join(''));
            }
        }

        var $search = $('#main-search-bar');

        if ($search.length) {
            function search(word) {
                var list = $('#docs *, #reference *').filter(function (index, element) {
                    return $(element).find('script').length === 0 && (new RegExp(word, 'i')).test(element.innerText);
                });

                var copy = list.slice();

                copy.each(function (index, element) {
                    list = list.filter(function (i, e) {
                        return e !== element.parentNode;
                    });
                });

                var result = [];

                list.each(function (i, e) {
                    while (e.parentNode && ~['inline', 'table-cell'].indexOf(window.getComputedStyle(e).display)) {
                        e = e.parentNode;
                    }

                    if (e !== result[result.length - 1]) {
                        result.push(e);
                    }
                });

                return result;
            }

            var searchValue = $search.val().trim();
            var timeout = null;

            $search.on('change input keyup keypress', function () {
                var newValue = $search.val().trim();

                if (newValue.length === 0) {
                    if (timeout) {
                        clearTimeout(timeout);
                    }

                    $('#search-result').hide();
                    $('#docs').removeClass('height-squeezed');

                    return;
                }

                $('#docs').addClass('height-squeezed');

                if (newValue.length < 2) {
                    if (timeout) {
                        clearTimeout(timeout);
                    }

                    $('#search-result').show().html('<p>Type at least 2 letters to start the search.</p>');

                    return;
                }

                if (searchValue !== newValue) {
                    if (timeout) {
                        clearTimeout(timeout);
                    }

                    searchValue = newValue;

                    $('#search-result').show().html('<p>Searching...</p>');

                    timeout = setTimeout(function () {
                        timeout = null;
                        var result = search(searchValue);

                        if (result.length === 0) {
                            $('#search-result').html('<p>No matches found.</p>');

                            return;
                        }

                        window.goToSearchResult = function (index) {
                            if (result[index]) {
                                var $element = $(result[index]);

                                if ($element.length) {
                                    if ($element.parents('#reference').length) {
                                        $('.main-wrapper').addClass('open');
                                    }

                                    $('#search-result').hide();
                                    $('#docs').removeClass('height-squeezed');
                                    $search.val('');

                                    setTimeout(function () {
                                        $element[0].scrollIntoView();
                                    }, 1);
                                }
                            }
                        };

                        var html = '';

                        result.slice(0, 50).forEach(function (element, index) {
                            var $element = $(element);

                            html += $('<div>').append($('<' + ($element.is('code') ? 'pre' : 'p') + ' class="search-result-item" onclick="goToSearchResult(' + index + ');">').text($element.text())).html().replace(new RegExp(searchValue, 'i'), function (word) {
                                return '<span class="highlight">' + word + '</span>';
                            });
                        });

                        $('#search-result').html(html + (result.length > 50 ? '<p>' + (result.length - 50) + ' results omitted, type more to filter results.</p>' : ''));
                    }, 500);
                }
            });
        }

        var locale = navigator.language || navigator.userLanguage || '';

        $(document)
            .on('click', 'a[data-open-doc]', function (event) {
                event.preventDefault();
                event.stopPropagation();

                var method = $(event.target).data('open-doc').split('::');

                openDocPanel(method[0], method[1]);
            })
            .on('click', '[data-slide-down]', function (event) {
                event.preventDefault();
                event.stopPropagation();

                $($(event.target).data('slide-down')).slideToggle();
            })
            .on('click', '[data-toggle]', function (event) {
                event.preventDefault();
                event.stopPropagation();

                $($(event.target).data('toggle')).toggle();
            })
            .on('click', '[data-session-close]', function (event) {
                event.preventDefault();
                event.stopPropagation();
                var key = $(event.target).data('session-close');
                sessStorage['closed-' + key] = '1';

                $(key).slideUp(200);
            })
        ;

        var $anchor = location.hash && $('[data-toggle="' + location.hash + '"]');

        if ($anchor && $anchor.length) {
            $anchor.click()[0].scrollIntoView();
        }

        var language = (locale.split(/[_-]/)[0] || '').toLowerCase();

        if (!sessStorage['closed-footer .help-translate'] &&
            location.href.indexOf('contribute/translate') === -1 &&
            [
                'af', 'smn', 'si', 'sk', 'sl', 'id', 'ia', 'hy', 'hu', 'ja', 'sn', 'haw',
                'en', 'fr', 'it', 'es', 'pt', 'de', 'ro', 'ru', 'vi', 'ar', 'da', 'nl',
                'cs', 'ka', 'hr', 'gl', 'bg', 'tr', 'sq', 'sr', 'fo', 'fi', 'sv', 'bs',
                'eu', 'or', 'mzn', 'mt', 'ms', 'mk', 'mgo', 'om', 'lt', 'lb', 'kea', 'pl',
                'am', 'ko', 'rm', 'rw', 'fa', 'et', 'uz', 'ur', 'az', 'ca', 'sw', 'vai',
                'yue', 'zh', 'chr', 'nb', 'ee', 'ug', 'el', 'cy', 'to', 'eo'
            ].indexOf(language) === -1
        ) {
            $.getJSON('/languages.json', function (languages) {
                var $help = $('footer .help-translate');
                $help.html($help.html().replace('#{language}', (languages[language] || {}).isoName || language)).show();
            });
        }

        function refreshDoc() {
            var search = $('#search-filter').val().toLowerCase();
            $('.doc-method').each(function () {
                var $method = $(this);
                $method[~$method.find('h2:first').text().toLowerCase().indexOf(search) ? 'show' : 'hide']();
            });
        }

        $('#search-filter').on('keyup change input', refreshDoc);

        window.addEventListener('message', function (event) {
            var data = event.data;
            if (typeof data === 'string') {
                try {
                    data = JSON.parse(data);
                } catch (e) {
                    data = null;
                }
            }
            if (data && data.sender === 'try-carbon') {
                switch (data.event) {
                    case 'ready':
                        var callback = (callbacks[data.token] || {})[data.event];
                        if (typeof callback === 'function') {
                            callback();
                        }
                        break;
                    case 'input':
                        // data.input
                        break;
                    case 'selection':
                        openDoc(event, data.selection, data.token);
                        break;
                }
            }
        });

        scrollCheck();
        $document.scroll(scrollCheck);
        $('.search').scroll(scrollCheck);

        $('.search-wrapper .close').click(function () {
            $('.main-wrapper').removeClass('open');
        });

        $('code').on('mouseup select dblclick', function (event) {
            var s = window.getSelection();
            if ((s.anchorOffset || s.anchorOffset === 0) && s.focusOffset && s.anchorOffset + 1 < s.focusOffset) {
                openDoc(event, s.anchorNode.wholeText.substring(s.anchorOffset, s.focusOffset));
            }
        });

        $('[href="#reference"]').click(function (event) {
            event.preventDefault();
            if ($('.main-wrapper').toggleClass('open').hasClass('open')) {
                $('#search-filter').focus();
            }
        });

        function objEach(obj, callback) {
            var keys = Object.keys(obj);
            for (var i = 0; i< keys.length; i++) {
                callback(keys[i], obj[keys[i]]);
            }
        }

        function reserveEach(obj, callback) {
            var keys = Object.keys(obj);
            for (var i = keys.length - 1; i >= 0; i--) {
                callback(keys[i], obj[keys[i]]);
            }
        }

        $(function () {
            var country = locale.toLowerCase().replace(/^[a-z]+[_-]/, '');

            if (country) {
                $('.' + country + '-country-only').show();
            }

            $('footer').css(
                'padding-right',
                (document.body.offsetWidth - (document.body.scrollWidth || document.body.clientWidth) + 'px')
            );

            $.ajax('/reference/', {
                success: function (data) {
                    $('.search').html(data).find('.live-editor code').each(function (index, block) {
                        hljs.highlightBlock(block);
                    });
                },
            });
            $('.history-slot').each(function () {
                var $slot = $(this);
                var primaryList = {};
                var releases = {};

                function processHistory(data) {
                    $.each(data, function () {
                        primaryList[this.created_at] = this;
                    });
                }

                $.getJSON('/releases.json').then(function (data) {
                    processHistory(data);

                    return $.getJSON('https://api.github.com/repos/briannesbitt/Carbon/releases');
                }).then(function (data) {
                    processHistory(data);

                    Object.keys(primaryList).sort().reverse().forEach(function (key) {
                        var item = primaryList[key];
                        var name = item.tag_name;
                        if (/^\d+\.\d+\.\d/.test(name)) {
                            var major = name.replace(/^(\d+)\..*$/, '$1');
                            var minor = name.replace(/^(\d+\.\d+)\..*$/, '$1');
                            var list = releases[major] || (releases[major] = {});
                            var subList = list[minor] || (list[minor] = {});
                            subList[name] = item;
                        }
                    });

                    var html = '';
                    reserveEach(releases, function (major, list) {
                        html += '<h1 class="history-major-title"><a href="#" data-history-major="' + major + '">Carbon ' + major + '</a></h1><div class="history-major-group history-major-' + major + ' hidden">';
                        objEach(list, function (minor, subList) {
                            html += '<h2 class="history-minor-title">' + minor + '.*</h2><div class="history-minor-group">';
                            objEach(subList, function (version, release) {
                                if (release.assets && release.assets.length) {
                                    release.asset_url = release.assets[0].browser_download_url;
                                }
                                html +=
                                    '<h3>' +
                                        version + '' +
                                        '<small class="release-date" title="' + (new Date(release.created_at)).toLocaleTimeString() + '">' + (new Date(release.created_at)).toLocaleDateString() + '</small>' +
                                        (release.asset_url
                                            ? '<a href="' + release.asset_url + '" class="btn btn-default download-release"><i class="glyphicon glyphicon-save"></i> Download</a>'
                                            : ''
                                        ) +
                                    '</h3>' +
                                    '<div class="version-description">' + ('\n' + release.body).replace(/(\n- [^\n]*)+/g, function (all) {
                                        return '<ul>' + all.replace(/\n- ([^\n]*)/g, '<li>$1</li>') + '</ul>';
                                    }).replace(/^\s+/, '').replace(/\s+$/, '').replace(/\n/g, '<br>').replace(/(https?:\/\/\S+)/g, '<a href="$1" target="_blank">$1</a>') + '</div>'
                                ;
                            });
                            html += '</div>';
                        });
                        html += '</div>';
                    });
                    $slot.html(html).find('.history-major-group').hide().removeClass('hidden');
                });
            });

            $(document).on('click', '[data-history-major]', function (event) {
                $('.history-major-' + $(this).data('history-major')).slideToggle();
                event.preventDefault();
                event.stopPropagation();
            });

            function isLaterInTheMonth(a, b) {
                var diff = (a.getDate() - b.getDate())
                    || (a.getHours() - b.getHours())
                    || (a.getMinutes() - b.getMinutes())
                    || (a.getSeconds() - b.getSeconds())
                    || (a.getMilliseconds() - b.getMilliseconds());

                return diff > 0;
            }

            if ($('.open-collective-list').length) {
                $.getJSON('https://opencollective.com/carbon/members/all.json', function (members) {
                    var date = new Date();
                    var lastYear = new Date();

                    if (lastYear.getMonth() === 1 && lastYear.getDate() === 29) {
                        lastYear.setDate(28);
                    }
                    lastYear.setFullYear(lastYear.getFullYear() - 1);

                    members.push({
                        'MemberId': 1,
                        'createdAt': '2019-01-01 02:00',
                        'type': 'ORGANIZATION',
                        'role': 'BACKER',
                        'tier': 'backer+',
                        'isActive': true,
                        'totalAmountDonated': 1000,
                        'currency': 'USD',
                        'lastTransactionAt': date.getFullYear() + '-' + (date.getMonth() + 1) + '-' + date.getDate() + ' 02:00',
                        'lastTransactionAmount': 25,
                        'profile': 'https://tidelift.com/',
                        'name': 'Tidelift',
                        'description': 'Get professional support for Carbon',
                        'image': '/docs/sponsors/tidelift-brand.png',
                        'website': 'https://tidelift.com/subscription/pkg/packagist-nesbot-carbon?utm_source=packagist-nesbot-carbon&utm_medium=referral&utm_campaign=docs',
                    });
                    members.push({
                        'MemberId': 2,
                        'createdAt': '2024-11-07 02:00',
                        'type': 'ORGANIZATION',
                        'role': 'BACKER',
                        'tier': 'backer+ yearly',
                        'isActive': true,
                        'totalAmountDonated': 170,
                        'currency': 'USD',
                        'lastTransactionAt': '2024-11-07 02:00',
                        'lastTransactionAmount': 170,
                        'profile': 'https://www.slotozilla.com/nz/free-spins',
                        'name': 'Slotozilla',
                        'description': 'Slotozilla website',
                        'image': '/docs/sponsors/slotozilla.png',
                        'website': 'https://www.slotozilla.com/nz/free-spins',
                    });
                    members.forEach(function (member) {
                        var createdAt = new Date(member.createdAt);
                        var lastTransactionAt = new Date(member.lastTransactionAt);

                        if (isLaterInTheMonth(createdAt, lastTransactionAt)) {
                            createdAt.setDate(lastTransactionAt.getDate());
                            createdAt.setHours(lastTransactionAt.getHours());
                            createdAt.setMinutes(lastTransactionAt.getMinutes());
                            createdAt.setSeconds(lastTransactionAt.getSeconds());
                            createdAt.setMilliseconds(lastTransactionAt.getMilliseconds());
                        }

                        var now = new Date();
                        var currentMonth = now.getMonth();
                        var monthDiff = (now.getFullYear() * 12 + currentMonth) - (createdAt.getFullYear() * 12 + createdAt.getMonth());

                        if (now.getDate() < createdAt.getDate()) {
                            monthDiff--;
                        }

                        var isYearly = ((member.tier || '').toLowerCase().indexOf('yearly') !== -1);

                        var monthlyContribution = (isYearly && lastTransactionAt.getTime() > lastYear.getTime())
                            ? (member.lastTransactionAmount / 11.2) // 11.2 instead of 12 to include the discount for yearly subscription
                            : (member.totalAmountDonated / (1 + monthDiff));

                        if (!isYearly) {
                            var lastMonth = new Date(now.getTime());
                            lastMonth.setMonth(currentMonth);

                            // Overflow
                            while (lastMonth.getMonth() === currentMonth) {
                                lastMonth.setDate(lastMonth.getDate() - 1);
                            }

                            if (lastTransactionAt.getTime() > lastMonth.getTime() &&
                                member.lastTransactionAmount > monthlyContribution
                            ) {
                                monthlyContribution = member.lastTransactionAmount;
                            }

                            var yearDiff = now.getFullYear() - createdAt.getFullYear();

                            if (currentMonth * 31 + now.getDate() < createdAt.getMonth() * 31 + createdAt.getDate()) {
                                yearDiff--;
                            }
                        }

                        var yearlyContribution = isYearly
                            ? (12 * monthlyContribution)
                            : (member.totalAmountDonated / Math.max(1, yearDiff));
                        var status = null;

                        if (monthlyContribution > 29) {
                            status = 'sponsor';
                        } else if (monthlyContribution > 14.5) {
                            status = 'backer';
                        } else if (monthlyContribution > 4.5 || yearlyContribution > 40) {
                            status = 'backer';
                        } else if (member.totalAmountDonated > 0) {
                            status = 'helper';
                        }

                        Object.assign(member, {
                            star: (monthlyContribution > 98 || yearlyContribution > 700),
                            status: status,
                            monthlyContribution: monthlyContribution,
                            yearlyContribution: yearlyContribution
                        });
                    });

                    members.sort(function (a, b) {
                        if (a.monthlyContribution === b.monthlyContribution) {
                            return b.totalAmountDonated - a.totalAmountDonated;
                        }

                        return b.monthlyContribution - a.monthlyContribution;
                    });

                    var memberByUrl = {};
                    members.forEach(function (member) {
                        var url = member.website || member.profile;
                        if (memberByUrl[url]) {
                            return;
                        }

                        memberByUrl[url] = member;
                    });
                    members = Object.values(memberByUrl);

                    ['sponsor', 'backerPlus', 'backer', 'helper'].forEach(function (status) {
                        $('.open-collective-' + status + 's').html(
                            members
                                .filter(function (member) {
                                    return member.status === status;
                                })
                                .map(function (member) {
                                    var href = $('<div>').text(member.website || member.profile).html();
                                    var src = $('<div>').text(member.image || member.profile.replace('https://opencollective.com/', 'https://images.opencollective.com/') + '/avatar/256.png').html();
                                    var size = ({
                                        sponsor: 64,
                                        backerPlus: 48,
                                        backer: 32,
                                    })[member.status] || 24;
                                    var margin = ({
                                        sponsor: 10,
                                        backerPlus: 6,
                                        backer: 5,
                                    })[member.status] || 3;

                                    if ([
                                        'onlinekasyno-polis.pl',
                                        'zonaminecraft.net',
                                        'slotozilla.com',
                                    ].indexOf((new URL(href)).host.replace(/^www\./, '')) === -1) {
                                        href += (href.indexOf('?') === -1 ? '?' : '&amp;') + 'utm_source=opencollective&amp;utm_medium=github&amp;utm_campaign=Carbon';
                                    }

                                    var title = $('<div>').text(member.description || member.name).html();
                                    var alt = $('<div>').text(member.name).html();
                                    var sponsor = (status === 'sponsor');

                                    return '<a style="position: relative; margin: ' + margin + 'px; display: inline-block; border: ' + (size / 8) + 'px solid ' + (member.star ? '#7ac35f' : (sponsor ? '#e3e3e3' : 'transparent')) + ';' + (sponsor ? ' background: white;' : ' border-radius: 50%; overflow: hidden;') + '" title="' + title + '" href="' + href + '" target="_blank">' +
                                        '<img' + (sponsor ? ' onload="adjustImageSize(this)"' : '') + ' onerror="fallbackImage(this)" alt="' + alt + '" src="' + src + '" width="' + size + '" height="' + size + '">' +
                                        (member.star ? '<span style="position: absolute; top: -15px; right: -15px; text-shadow: 0 0 3px black;">⭐</span>' : '') +
                                        '</a>';
                                })
                                .join('')
                        );
                    });
                });
            }
        });

        function adjustImageSize(element) {
            var img = new Image();
            img.onload = function () {
                if (img.width && img.height) {
                    element.width = Math.round(img.width * element.height / img.height);
                }
            };
            img.src = element.src;
        }

        function fallbackImage(element) {
            element.src = 'https://opencollective.com/static/images/default-guest-logo.svg';
        }

    </script>
    <script src="//cdn.jsdelivr.net/npm/highlight.js@8.4.0/lib/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script type="text/javascript">
        var _paq = _paq || [];
        _paq.push(['trackPageView']);
        _paq.push(['enableLinkTracking']);
        (function() {
            var u="//piwik.selfbuild.fr/";
            _paq.push(['setTrackerUrl', u+'piwik.php']);
            _paq.push(['setSiteId', '23']);
            var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
            g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
        })();
    </script>
    <script>
    function formatLanguage(language, extraClasses) {
        return '<div class="link ' + extraClasses + '">' +
                '<a><span class="chip">' + language.id + '</span>' + language.isoName + (language.regionName ? ' (' + language.regionName + ')' : '') + (language.variant ? ' (' + language.variant + ')' : '') + '</a>' +
            '</div>';
    }

    var english = {};

    $.getJSON('/contribute/translate/assets/translations/en.json', function (translations) {
        english = translations;
    });

    $.getJSON('/contribute/translate/assets/languages.json', function (languages) {
        var language = (navigator.language || navigator.userLanguage).split(/[_-]/);
        var region = (language[1] || 'unknown').toUpperCase();
        language = language[0].toLowerCase();
        var preferred = '';
        var count = 0;
        var other = languages.filter(function (item) {
            if (item.code === language) {
                count++;
                preferred += formatLanguage(item, 'preferred' + (item.region === region ? ' favorite' : ''));

                return false;
            }

            return true;
        });
        $('.translate-slot').html(
            '<p>Based on your browser\'s settings, ' +
                (count
                    ? 'we detected ' + count + ' language' + (count === 1 ? '' : 's') + ' you may know. Please check if there is no mistake and add words that could be missing.'
                    : 'your language seems not yet available in Carbon, add it!'
                ) +
            '</p>' +
            '<p>'+
                'Add a new language if it\'s not yet available: ' +
                '<input class="new-language" placeholder="Language name / ISO 639-1 code" style="width: 300px;">' +
                '<input class="add-new-language" type="button" value="Add">' +
            '</p>' +
            '<p>'+
                'Or pick one of the following:' +
            '</p>' +
            preferred + other.map(formatLanguage).join('')
        );
    }, function (error) {
        console.warn(error);
    });

    var editLanguage = null;

    function loadLanguage(language) {
        $('.translate-slot').hide();
        $('.edit-slot').text('Loading...');

        var lines = [
            ['CarbonInterval::years(2)', '->forHumans()'],
            ['CarbonInterval::years(2)', '->forHumans(["short" => true])'],
            ['CarbonInterval::year()', '->forHumans()'],
            ['CarbonInterval::year()', '->forHumans(["aUnit" => true])'],
            ['CarbonInterval::months(2)', '->forHumans()'],
            ['CarbonInterval::months(2)', '->forHumans(["short" => true])'],
            ['CarbonInterval::month()', '->forHumans()'],
            ['CarbonInterval::month()', '->forHumans(["aUnit" => true])'],
            ['CarbonInterval::weeks(2)', '->forHumans()'],
            ['CarbonInterval::weeks(2)', '->forHumans(["short" => true])'],
            ['CarbonInterval::week()', '->forHumans()'],
            ['CarbonInterval::week()', '->forHumans(["aUnit" => true])'],
            ['CarbonInterval::days(2)', '->forHumans()'],
            ['CarbonInterval::days(2)', '->forHumans(["short" => true])'],
            ['CarbonInterval::day()', '->forHumans()'],
            ['CarbonInterval::day()', '->forHumans(["aUnit" => true])'],
            ['CarbonInterval::hours(2)', '->forHumans()'],
            ['CarbonInterval::hours(2)', '->forHumans(["short" => true])'],
            ['CarbonInterval::hour()', '->forHumans()'],
            ['CarbonInterval::hour()', '->forHumans(["aUnit" => true])'],
            ['CarbonInterval::minutes(2)', '->forHumans()'],
            ['CarbonInterval::minutes(2)', '->forHumans(["short" => true])'],
            ['CarbonInterval::minute()', '->forHumans()'],
            ['CarbonInterval::minute()', '->forHumans(["aUnit" => true])'],
            ['CarbonInterval::seconds(2)', '->forHumans()'],
            ['CarbonInterval::seconds(2)', '->forHumans(["short" => true])'],
            ['CarbonInterval::second()', '->forHumans()'],
            ['CarbonInterval::second()', '->forHumans(["aUnit" => true])'],
            'Warning, do not uppercase the first letter if it\'s not required, days/months are always uppercase in English, so "Monday" is written this way even in a sentence like "See you Monday", please translate the following as if it could be in the middle of such sentences. Short versions are used in short date formats and minimalist days are used calendar headings and such custom usages.',
            ['Carbon::parse("monday")', '->dayName'],
            ['Carbon::parse("monday")', '->shortDayName'],
            ['Carbon::parse("monday")', '->minDayName'],
            ['Carbon::parse("tuesday")', '->dayName'],
            ['Carbon::parse("tuesday")', '->shortDayName'],
            ['Carbon::parse("tuesday")', '->minDayName'],
            ['Carbon::parse("wednesday")', '->dayName'],
            ['Carbon::parse("wednesday")', '->shortDayName'],
            ['Carbon::parse("wednesday")', '->minDayName'],
            ['Carbon::parse("thursday")', '->dayName'],
            ['Carbon::parse("thursday")', '->shortDayName'],
            ['Carbon::parse("thursday")', '->minDayName'],
            ['Carbon::parse("friday")', '->dayName'],
            ['Carbon::parse("friday")', '->shortDayName'],
            ['Carbon::parse("friday")', '->minDayName'],
            ['Carbon::parse("saturday")', '->dayName'],
            ['Carbon::parse("saturday")', '->shortDayName'],
            ['Carbon::parse("saturday")', '->minDayName'],
            ['Carbon::parse("sunday")', '->dayName'],
            ['Carbon::parse("sunday")', '->shortDayName'],
            ['Carbon::parse("sunday")', '->minDayName'],
            ['Carbon::parse("january 2023")', '->monthName'],
            ['Carbon::parse("january 2023")', '->shortMonthName'],
            ['Carbon::parse("february 2023")', '->monthName'],
            ['Carbon::parse("february 2023")', '->shortMonthName'],
            ['Carbon::parse("march 2023")', '->monthName'],
            ['Carbon::parse("march 2023")', '->shortMonthName'],
            ['Carbon::parse("april 2023")', '->monthName'],
            ['Carbon::parse("april 2023")', '->shortMonthName'],
            ['Carbon::parse("may 2023")', '->monthName'],
            ['Carbon::parse("may 2023")', '->shortMonthName'],
            ['Carbon::parse("june 2023")', '->monthName'],
            ['Carbon::parse("june 2023")', '->shortMonthName'],
            ['Carbon::parse("july 2023")', '->monthName'],
            ['Carbon::parse("july 2023")', '->shortMonthName'],
            ['Carbon::parse("august 2023")', '->monthName'],
            ['Carbon::parse("august 2023")', '->shortMonthName'],
            ['Carbon::parse("september 2023")', '->monthName'],
            ['Carbon::parse("september 2023")', '->shortMonthName'],
            ['Carbon::parse("october 2023")', '->monthName'],
            ['Carbon::parse("october 2023")', '->shortMonthName'],
            ['Carbon::parse("november 2023")', '->monthName'],
            ['Carbon::parse("november 2023")', '->shortMonthName'],
            ['Carbon::parse("december 2023")', '->monthName'],
            ['Carbon::parse("december 2023")', '->shortMonthName'],
            ['Carbon::now()->subHours(2)', '->diffForHumans()'],
            ['Carbon::now()->addHours(2)->addMinute()', '->diffForHumans(["part" => 1])'],
            ['($d = Carbon::now())->copy()->subHours(2)', '->diffForHumans($d)'],
            ['($d = Carbon::now())->copy()->addHours(2)->addMinute()', '->diffForHumans($d)']
        ];

        $.getJSON('/contribute/translate/assets/translations/' + language + '.json', function (translations) {
            $('.edit-slot').html('<table><tr><th>English</th><th style="padding: 0 20px;">' + editLanguage + '</th><th>' + (language ? 'Fix and comments' : 'Translation in ' + editLanguage) + '</th></tr>' + lines.map(function (line) {
                return typeof line === 'string'
                    ? '<tr class="translate-line"><td colspan="3" style="padding: 10px 0; font-weight: bold;">' + line + '</td></tr>'
                    : '<tr class="translate-line"><td>' + (english[line[0] + line[1]] || line[0] + line[1]) + '</td><td style="padding: 0 20px;">' + (translations[line[0] + line[1]] || '??') + '</td><td><textarea style="width: 400px; height: 26px;" placeholder="' + (language ? 'This should rather be... because...' : 'Translation in ' + editLanguage) + '"></textarea></td></tr>';
            }).join('') + '</table>' +
            '<div style="padding-top: 10px;">' +
                '<p><textarea class="additional-fixes" cols="70" rows="4" placeholder="If what you wish to fix does not appear in the table, please add it here."></textarea></p>' +
                '<p><textarea class="additional-comments" cols="70" rows="4" placeholder="Precise here anything else we may need to know"></textarea></p>' +
                '<p>By clicking on Submit, you will be redirected to GitHub where you will be required to be logged in (it allows us to keep a trace of your authorship and centralize requests).</p>' +
                '<input class="submit-language" type="button" value="Submit" disabled>' +
            '</div>');
        }, function (error) {
            $('.edit-slot').text('Loading error. Please try later.');
            $('.translate-slot').show();
            console.warn(error);
        });
    }

    function uriParam(name, value) {
        return name + '=' + encodeURIComponent(value);
    }

    function getIssue() {
        var issue = '';
        $('.translate-line').each(function () {
            var cells = $(this).find('td');
            var value = cells.eq(2).find('textarea').val();
            if (value) {
                issue += '|' + cells.eq(0).text() + '|' + cells.eq(1).text() + '|' + value + '|\n';
            }
        });
        if (issue) {
            issue = '|English|' + editLanguage + '|comments|\n' +
                '|--|--|--|\n' + issue;
        }
        var fixes = $('.additional-fixes').val();
        if (fixes) {
            issue += '\n## Additional fixes\n' + fixes;
        }
        var comments = $('.additional-comments').val();
        if (comments) {
            issue += '\n\n----\n' + comments;
        }

        return issue;
    }

    $(document)
        .on('change keyup', '.edit-slot textarea', function () {
            $('.submit-language').prop('disabled', ![].join.call($('.edit-slot textarea').map(function () {
                return $(this).val();
            }), '').length);
        })
        .on('click', '.submit-language', function () {
            window.open('https://github.com/briannesbitt/Carbon/issues/new?' + uriParam('title', '[Translation tool] ' + editLanguage) + '&' + uriParam('body', getIssue()));
        })
        .on('click', '.translate-slot a', function (event) {
            event.stopPropagation();
            event.preventDefault();

            editLanguage = $(this).find('.chip').text();
            loadLanguage(editLanguage);
        })
        .on('click', '.add-new-language', function () {
            var $field = $('.new-language');
            editLanguage = $field.val();
            $field.val('');
            loadLanguage();
        })
    ;
</script>
</body>
</html>
